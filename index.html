<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>AI启示</title>
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
    <!-- 苹果导航栏 -->
    <nav class="navbar">
        <h1 class="navbar-title">AI启示</h1>
        <button class="user-button" id="userCenterBtn">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                <path d="M12 12C14.2091 12 16 10.2091 16 8C16 5.79086 14.2091 4 12 4C9.79086 4 8 5.79086 8 8C8 10.2091 9.79086 12 12 12Z" stroke="currentColor" stroke-width="2"/>
                <path d="M20 21V19C20 17.9391 19.5786 16.9217 18.8284 16.1716C18.0783 15.4214 17.0609 15 16 15H8C6.93913 15 5.92172 15.4214 5.17157 16.1716C4.42143 16.9217 4 17.9391 4 19V21" stroke="currentColor" stroke-width="2"/>
            </svg>
            <span class="notification-badge" id="notificationBadge" style="display: none;">3</span>
        </button>
    </nav>

    <!-- 苹果下拉菜单 -->
    <div class="dropdown-menu" id="dropdownMenu">
        <div class="dropdown-item" id="historyBtn">
            <svg viewBox="0 0 24 24" fill="none">
                <circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2"/>
                <polyline points="12,6 12,12 16,14" stroke="currentColor" stroke-width="2"/>
            </svg>
            历史记录
        </div>
        <div class="dropdown-item" id="helpBtn">
            <svg viewBox="0 0 24 24" fill="none">
                <circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2"/>
                <path d="M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3" stroke="currentColor" stroke-width="2"/>
                <line x1="12" y1="17" x2="12.01" y2="17" stroke="currentColor" stroke-width="2"/>
            </svg>
            帮助
        </div>
    </div>

    <!-- 启动模块 -->
    <div id="splash" class="module splash-module">
        <div class="container">
            <div class="card">
                <div class="card-body" style="text-align: center;">
                    <div class="loading-animation">
                        <div class="loading-spinner"></div>
                    </div>
                    <h2 class="module-title" style="margin-top: 20px;">当你困惑时</h2>
                    <h2 class="module-title">答案已在心中</h2>
                    <p class="module-subtitle" style="margin-top: 12px;">正在连接内心智慧...</p>
                </div>
            </div>
            
            <div class="login-error" style="display: none; margin-top: 20px;">
                <div class="card">
                    <div class="card-body" style="text-align: center;">
                        <p style="color: var(--system-red); margin-bottom: 16px;">登录失败，请重试</p>
                        <button id="retryLogin" class="btn btn-primary">重试</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- 场景选择模块 -->
    <div id="scene" class="module scene-module" style="display: none;">
        <div class="container">
            <div class="module-header">
                <h1 class="module-title">选择场景</h1>
                <p class="module-subtitle">选择你想解决的场景，获取专属启示</p>
            </div>
            
            <div class="module-content">
                <div class="scene-grid">
                    <div class="scene-card" data-scene="job">
                        <div class="scene-icon">
                            <svg viewBox="0 0 24 24" fill="none">
                                <path d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2" stroke="currentColor" stroke-width="2"/>
                                <circle cx="9" cy="7" r="4" stroke="currentColor" stroke-width="2"/>
                                <path d="M22 21v-2a4 4 0 0 0-3-3.87" stroke="currentColor" stroke-width="2"/>
                                <path d="M16 3.13a4 4 0 0 1 0 7.75" stroke="currentColor" stroke-width="2"/>
                            </svg>
                        </div>
                        <h3 class="scene-title">职场选择</h3>
                    </div>
                    
                    <div class="scene-card" data-scene="love">
                        <div class="scene-icon">
                            <svg viewBox="0 0 24 24" fill="none">
                                <path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z" stroke="currentColor" stroke-width="2"/>
                            </svg>
                        </div>
                        <h3 class="scene-title">情感关系</h3>
                    </div>
                    
                    <div class="scene-card" data-scene="daily">
                        <div class="scene-icon">
                            <svg viewBox="0 0 24 24" fill="none">
                                <circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2"/>
                                <polyline points="12,6 12,12 16,14" stroke="currentColor" stroke-width="2"/>
                            </svg>
                        </div>
                        <h3 class="scene-title">日常决策</h3>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- 提问模块 -->
    <div id="question" class="module question-module" style="display: none;">
        <div class="container">
            <div class="module-header">
                <h1 class="module-title">写下困惑</h1>
                <p class="module-subtitle">请写下你的具体困惑</p>
            </div>
            
            <div class="module-content">
                <div class="form-group">
                    <textarea id="questionInput" placeholder="请写下你的具体困惑（如：是否接受新offer）" maxlength="50" rows="4"></textarea>
                    <div class="form-footer">
                        <span id="charCount" class="char-count">0/50</span>
                        <p id="errorTip" class="error-tip" style="display: none;"></p>
                    </div>
                </div>
                
                <div class="button-group">
                    <button id="submitQuestion" class="btn btn-primary">获取启示</button>
                </div>
                
                <div class="divider">
                    <span class="divider-text">或者</span>
                </div>
                
                <button id="switchToPlumBlossomBtn" class="btn btn-secondary" style="width: 100%;">使用梅花易数</button>
            </div>
        </div>
    </div>
    
    <!-- 梅花易数模块 -->
    <div id="plumBlossom" class="module plum-blossom-module" style="display: none;">
        <h2 class="plum-blossom-title">梅花易数</h2>
        <p class="plum-blossom-tip">梅花易数需要时间、事件和随机数来推断</p>
        
        <!-- 时间选择 -->
        <div class="form-group">
            <label for="timeInput">预测时间</label>
            <div class="time-input-group">
                <input type="datetime-local" id="timeInput" class="time-input">
                <button id="getCurrentTimeBtn" class="small-btn">当前时间</button>
            </div>
        </div>
        
        <!-- 三位数随机数选择 -->
        <div class="form-group">
            <label>随机三位数</label>
            <div class="random-number-group">
                <!-- 齿轮选择器 - 百位数 -->
                <div class="gear-selector">
                    <div class="gear-container">
                        <div class="gear-wheel" id="hundredGear">
                            <div class="gear-teeth"></div>
                            <div class="gear-center">
                                <span class="gear-number">0</span>
                            </div>
                        </div>
                        <div class="gear-value" id="hundredValue">0</div>
                    </div>
                </div>
                
                <!-- 齿轮选择器 - 十位数 -->
                <div class="gear-selector">
                    <div class="gear-container">
                        <div class="gear-wheel" id="tenGear">
                            <div class="gear-teeth"></div>
                            <div class="gear-center">
                                <span class="gear-number">0</span>
                            </div>
                        </div>
                        <div class="gear-value" id="tenValue">0</div>
                    </div>
                </div>
                
                <!-- 齿轮选择器 - 个位数 -->
                <div class="gear-selector">
                    <div class="gear-container">
                        <div class="gear-wheel" id="unitGear">
                            <div class="gear-teeth"></div>
                            <div class="gear-center">
                                <span class="gear-number">0</span>
                            </div>
                        </div>
                        <div class="gear-value" id="unitValue">0</div>
                    </div>
                </div>
                
                <button id="generateRandomNumberBtn" class="small-btn">随机生成</button>
            </div>
        </div>
        
        <!-- 事件输入 -->
        <div class="form-group">
            <label for="eventInput">预测事件</label>
            <textarea id="eventInput" placeholder="请描述你要预测的事件（如：事业发展、感情运势等）" maxlength="100"></textarea>
            <p id="eventCharCount" class="char-count">0/100</p>
        </div>
        
        <p id="plumBlossomErrorTip" class="error-tip" style="display: none;"></p>
        <div class="button-group">
            <button id="submitPlumBlossomBtn">开始推断</button>
            <button id="backToNormalQuestionBtn" class="secondary-btn">返回普通提问</button>
        </div>
    </div>

    <!-- 过渡模块 -->
    <div id="transition" class="module transition-module" style="display: none;">
        <div class="light-effect">
            <div class="particle"></div>
            <div class="particle"></div>
            <div class="particle"></div>
            <div class="particle"></div>
        </div>
        <p class="transition-text">正在连接宇宙中心的能量...</p>
        <div class="loading-spinner">
            <p class="loading-tip">请稍候，宇宙能量正在汇聚</p>
        </div>
        <div class="retry-section" style="display: none;">
            <p>网络波动，重试一次吧</p>
            <button id="retryGenerate">重试</button>
        </div>
    </div>

    <!-- 答案模块 -->
    <div id="revelation" class="module revelation-module" style="display: none;">
        <h2 class="revelation-title">你的专属启示</h2>
        <div class="revelation-content">
            <div class="revelation-scroll-container">
                <div id="revelationText" class="revelation-text">正在为你呈现...</div>
            </div>
        </div>
        <div class="revelation-buttons">
            <button id="collectBtn" class="btn">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
                <span>收藏</span>
            </button>
            <button id="newQuestionBtn" class="btn">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M12 4v16M4 12h16" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
                <span>重新提问</span>
            </button>
            <button id="knowledgeBtn" class="btn">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    <circle cx="12" cy="12" r="3" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
                <span>小知识</span>
            </button>
            <button id="unlockBtn" class="btn">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <rect x="3" y="11" width="18" height="11" rx="2" ry="2" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    <path d="M7 11V7a5 5 0 0 1 10 0v4" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
                <span>解锁更多</span>
            </button>
        </div>
    </div>

    <!-- 个人中心模块 -->
    <div id="mine" class="module mine-module" style="display: none;">
        <div class="mine-header">
            <button id="closeMine" class="close-btn">×</button>
            <div class="user-info">
                <img id="userAvatar" src="" alt="用户头像" class="user-avatar">
                <span id="userNickname" class="user-nickname">匿名用户</span>
            </div>
        </div>
        <div class="mine-list">
            <div class="mine-item" id="myCollections">
                <span>我的收藏</span>
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M9 18l6-6-6-6" stroke="#666" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
            </div>
            <div class="mine-item" id="myOrders">
                <span>付费记录</span>
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M9 18l6-6-6-6" stroke="#666" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
            </div>
            <div class="mine-item" id="aboutProduct">
                <span>关于产品</span>
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M9 18l6-6-6-6" stroke="#666" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
            </div>
        </div>
        <div class="collections-content" id="collectionsContent" style="display: none;">
            <h3>我的收藏</h3>
            <div id="collectionsList"></div>
        </div>
    </div>

    <script src="js/app.js"></script>
</body>
</html>